_format_version: "3.0"
_transform: true

certificates:
  - cert: |
      -----BEGIN CERTIFICATE-----
      MIIDnDCCAyOgAwIBAgISBu2ZVxUNayZDspneFFhVN4T/MAoGCCqGSM49BAMDMDIx
      CzAJBgNVBAYTAlVTMRYwFAYDVQQKEw1MZXQncyBFbmNyeXB0MQswCQYDVQQDEwJF
      NjAeFw0yNTA4MDMxMzUwMTFaFw0yNTExMDExMzUwMTBaMCMxITAfBgNVBAMTGHRy
      YWNraW8uYW1pc2FoZGV2LmNvbS5icjBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IA
      BFCmzbBLcVOZiOCys2qyjclZOoeOz77m/DR1ggcov36dqYV09I5M0S8wP1iRk9yj
      BwCOs1gR/5HrP3ceNgTWm7ijggImMIICIjAOBgNVHQ8BAf8EBAMCB4AwHQYDVR0l
      BBYwFAYIKwYBBQUHAwEGCCsGAQUFBwMCMAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYE
      FL0SPCMAg2Z6E/o+JSUL4L2bD37SMB8GA1UdIwQYMBaAFJMnRpgDqVFojpjWxEJI
      2yO/WJTSMDIGCCsGAQUFBwEBBCYwJDAiBggrBgEFBQcwAoYWaHR0cDovL2U2Lmku
      bGVuY3Iub3JnLzAjBgNVHREEHDAaghh0cmFja2lvLmFtaXNhaGRldi5jb20uYnIw
      EwYDVR0gBAwwCjAIBgZngQwBAgEwLgYDVR0fBCcwJTAjoCGgH4YdaHR0cDovL2U2
      LmMubGVuY3Iub3JnLzEyOC5jcmwwggEDBgorBgEEAdZ5AgQCBIH0BIHxAO8AdgDt
      PEvW6AbCpKIAV9vLJOI4Ad9RL+3EhsVwDyDdtz4/4AAAAZhwaAQrAAAEAwBHMEUC
      ID/glju46XuAKYlDRm8q9nxo1+TiVZjGGrAvCVRcseMrAiEA80NrjA605K6HbJGE
      aJXSzXDe/ffvnbk2MaCr8L8a/LwAdQAN4fIwK9MNwUBiEgnqVS78R3R8sdfpMO8O
      Qh60fk6qNAAAAZhwaAQhAAAEAwBGMEQCIDMxlV0V+l4Sr4kpRdKs0WGTPfItTZ9U
      cRQMfG0JvPdQAiA9jhqwYAxLuKDQKd7HFTlSBPtqSDKQrzMRLWy4F2HQ5TAKBggq
      hkjOPQQDAwNnADBkAjAwnl/I52RjIDeEKCg85ktxZylXKLzW0HF0GMU6httirKI6
      Hilt1OXbloKYeWjFShsCMCHjdcutQOg3sVAs0ED0kZ77UYDjBqD07l8Jdy9oSndP
      y/QXS46XktFW14LFe3uSCA==
      -----END CERTIFICATE-----
    key: |
      -----BEGIN PRIVATE KEY-----
      MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgpJt+Ff66roe0iJ93
      1Uifb0VDERT8lvi7TEepAVGXXA+hRANCAARQps2wS3FTmYjgsrNqso3JWTqHjs++
      5vw0dYIHKL9+namFdPSOTNEvMD9YkZPcowcAjrNYEf+R6z93HjYE1pu4
      -----END PRIVATE KEY-----
    snis:
      - name: trackio.amisahdev.com.br
  
  - cert: |
      -----BEGIN CERTIFICATE-----
      MIIEVzCCAj+gAwIBAgIRALBXPpFzlydw27SHyzpFKzgwDQYJKoZIhvcNAQELBQAw
      TzELMAkGA1UEBhMCVVMxKTAnBgNVBAoTIEludGVybmV0IFNlY3VyaXR5IFJlc2Vh
      cmNoIEdyb3VwMRUwEwYDVQQDEwxJU1JHIFJvb3QgWDEwHhcNMjQwMzEzMDAwMDAw
      WhcNMjcwMzEyMjM1OTU5WjAyMQswCQYDVQQGEwJVUzEWMBQGA1UEChMNTGV0J3Mg
      RW5jcnlwdDELMAkGA1UEAxMCRTYwdjAQBgcqhkjOPQIBBgUrgQQAIgNiAATZ8Z5G
      h/ghcWCoJuuj+rnq2h25EqfUJtlRFLFhfHWWvyILOR/VvtEKRqotPEoJhC6+QJVV
      6RlAN2Z17TJOdwRJ+HB7wxjnzvdxEP6sdNgA1O1tHHMWMxCcOrLqbGL0vbijgfgw
      gfUwDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcD
      ATASBgNVHRMBAf8ECDAGAQH/AgEAMB0GA1UdDgQWBBSTJ0aYA6lRaI6Y1sRCSNsj
      v1iU0jAfBgNVHSMEGDAWgBR5tFnme7bl5AFzgAiIyBpY9umbbjAyBggrBgEFBQcB
      AQQmMCQwIgYIKwYBBQUHMAKGFmh0dHA6Ly94MS5pLmxlbmNyLm9yZy8wEwYDVR0g
      BAwwCjAIBgZngQwBAgEwJwYDVR0fBCAwHjAcoBqgGIYWaHR0cDovL3gxLmMubGVu
      Y3Iub3JnLzANBgkqhkiG9w0BAQsFAAOCAgEAfYt7SiA1sgWGCIpunk46r4AExIRc
      MxkKgUhNlrrv1B21hOaXN/5miE+LOTbrcmU/M9yvC6MVY730GNFoL8IhJ8j8vrOL
      pMY22OP6baS1k9YMrtDTlwJHoGby04ThTUeBDksS9RiuHvicZqBedQdIF65pZuhp
      eDcGBcLiYasQr/EO5gxxtLyTmgsHSOVSBcFOn9lgv7LECPq9i7mfH3mpxgrRKSxH
      pOoZ0KXMcB+hHuvlklHntvcI0mMMQ0mhYj6qtMFStkF1RpCG3IPdIwpVCQqu8GV7
      s8ubknRzs+3C/Bm19RFOoiPpDkwvyNfvmQ14XkyqqKK5oZ8zhD32kFRQkxa8uZSu
      h4aTImFxknu39waBxIRXE4jKxlAmQc4QjFZoq1KmQqQg0J/1JF8RlFvJas1VcjLv
      YlvUB2t6npO6oQjB3l+PNf0DpQH7iUx3Wz5AjQCi6L25FjyE06q6BZ/QlmtYdl/8
      ZYao4SRqPEs/6cAiF+Qf5zg2UkaWtDphl1LKMuTNLotvsX99HP69V2faNyegodQ0
      LyTApr/vT01YPE46vNsDLgK+4cL6TrzC/a4WcmF5SRJ938zrv/duJHLXQIku5v0+
      EwOy59Hdm0PT/Er/84dDV0CSjdR/2XuZM3kpysSKLgD1cKiDA+IRguODCxfO9cyY
      Ig46v9mFmBvyH04=
      -----END CERTIFICATE-----
      
    key: |
      -----BEGIN PRIVATE KEY-----
      MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgbM1SYCgscqd8tk3t
      KeugdlMgQTpxg2CJaiHWs+AgF4GhRANCAASyps0K2j/7mKDnSH1xrEhi3xw+LpG/
      7wITVpnkQHyjRcnkmAOZuC8lXVw1JClw5wYO6ICmIdEKtueUAPeEOFf/
      -----END PRIVATE KEY-----
    snis:
      - name: trackio-oc.amisahdev.com.br


services: 
- name: django
  url: http://django:5000
  routes:
  - name: django
    paths:
    - /
    - /about/
    - /accounts/*
    - /users/*
    - /admin/*
    methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
    - HEAD
  - name: api
    paths:
    - /api/*
    methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
    - HEAD
  
- name: tracking
  url: http://tracking:3000
  routes:
  - name: tracking
    paths:
    - /api/track/*
    methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
    - HEAD

plugins:
  - name: request-transformer
    config:
      replace:
        headers:
          - "Host:trackio-oc.amisahdev.com.br"
          - "X-Forwarded-Proto:https"